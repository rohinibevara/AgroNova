<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AgroNova - Cultivating the Future, Together</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        /* All your existing CSS remains the same */
        /* CSS Variables */
        :root {
            --primary: #2e7d32;
            --primary-dark: #1b5e20;
            --primary-light: #4caf50;
            --secondary: #ffa000;
            --text-dark: #333;
            --text-light: #666;
            --white: #fff;
            --light-bg: #f9f9f9;
            --border-radius: 8px;
            --shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
            --transition: all 0.3s ease;
        }

        /* Reset and Base Styles */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            color: var(--text-dark);
            background-color: var(--white);
        }

        a {
            text-decoration: none;
            color: inherit;
        }

        ul {
            list-style: none;
        }

        img {
            max-width: 100%;
        }

        .container {
            width: 90%;
            max-width: 1200px;
            margin: 0 auto;
        }

        .btn {
            display: inline-block;
            padding: 12px 28px;
            background-color: var(--primary);
            color: var(--white);
            border-radius: var(--border-radius);
            font-weight: 600;
            transition: var(--transition);
            border: none;
            cursor: pointer;
        }

        .btn:hover {
            background-color: var(--primary-dark);
            transform: translateY(-2px);
        }

        .btn-secondary {
            background-color: var(--secondary);
        }

        .btn-secondary:hover {
            background-color: #ff8f00;
        }

        .section {
            padding: 80px 0;
        }

        .section-title {
            text-align: center;
            margin-bottom: 50px;
            font-size: 2.2rem;
            color: var(--primary-dark);
            position: relative;
        }

        .section-title:after {
            content: '';
            position: absolute;
            bottom: -15px;
            left: 50%;
            transform: translateX(-50%);
            width: 80px;
            height: 4px;
            background-color: var(--secondary);
        }

        /* Header Styles */
        header {
            background-color: var(--white);
            box-shadow: var(--shadow);
            position: sticky;
            top: 0;
            z-index: 1000;
        }

        .navbar {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 20px 0;
        }

        .logo {
            font-size: 1.8rem;
            font-weight: 700;
            color: var(--primary);
        }

        .logo span {
            color: var(--secondary);
        }

        .nav-links {
            display: flex;
            gap: 30px;
        }

        .nav-links a {
            font-weight: 500;
            transition: var(--transition);
        }

        .nav-links a:hover {
            color: var(--primary);
        }

        .hamburger {
            display: none;
            cursor: pointer;
            font-size: 1.5rem;
        }

        /* Hero Section */
        .hero {
            background: linear-gradient(rgba(0, 0, 0, 0.6), rgba(0, 0, 0, 0.6)), url('https://images.unsplash.com/photo-1500382017468-9049fed747ef?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1932&q=80') no-repeat center center/cover;
            height: 90vh;
            display: flex;
            align-items: center;
            color: var(--white);
            text-align: center;
        }

        .hero-content {
            max-width: 800px;
            margin: 0 auto;
        }

        .hero h1 {
            font-size: 3.5rem;
            margin-bottom: 20px;
            line-height: 1.2;
        }

        .hero p {
            font-size: 1.2rem;
            margin-bottom: 30px;
            opacity: 0.9;
        }

        /* About Section */
        .about {
            background-color: var(--light-bg);
        }

        .about-content {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 50px;
            align-items: center;
        }

        .about-text h2 {
            font-size: 2rem;
            margin-bottom: 20px;
            color: var(--primary-dark);
        }

        .about-text p {
            margin-bottom: 20px;
            color: var(--text-light);
        }

        .about-image img {
            border-radius: var(--border-radius);
            box-shadow: var(--shadow);
        }

        /* Services Section */
        .services-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 30px;
        }

        .service-card {
            background-color: var(--white);
            border-radius: var(--border-radius);
            padding: 30px;
            box-shadow: var(--shadow);
            transition: var(--transition);
            text-align: center;
        }

        .service-card:hover {
            transform: translateY(-10px);
        }

        .service-icon {
            font-size: 3rem;
            color: var(--primary);
            margin-bottom: 20px;
        }

        .service-card h3 {
            font-size: 1.5rem;
            margin-bottom: 15px;
            color: var(--primary-dark);
        }

        /* Research Section */
        .research {
            background-color: var(--light-bg);
        }

        .research-content {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 50px;
            align-items: center;
        }

        .research-text h2 {
            font-size: 2rem;
            margin-bottom: 20px;
            color: var(--primary-dark);
        }

        .research-text p {
            margin-bottom: 20px;
            color: var(--text-light);
        }

        .research-stats {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-top: 30px;
        }

        .stat {
            text-align: center;
            padding: 20px;
            background-color: var(--white);
            border-radius: var(--border-radius);
            box-shadow: var(--shadow);
        }

        .stat-number {
            font-size: 2.5rem;
            font-weight: 700;
            color: var(--primary);
            margin-bottom: 10px;
        }

        /* Blog Section */
        .blog-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 30px;
        }

        .blog-card {
            background-color: var(--white);
            border-radius: var(--border-radius);
            overflow: hidden;
            box-shadow: var(--shadow);
            transition: var(--transition);
        }

        .blog-card:hover {
            transform: translateY(-5px);
        }

        .blog-image {
            height: 200px;
            overflow: hidden;
        }

        .blog-image img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: var(--transition);
        }

        .blog-card:hover .blog-image img {
            transform: scale(1.1);
        }

        .blog-content {
            padding: 20px;
        }

        .blog-date {
            font-size: 0.9rem;
            color: var(--text-light);
            margin-bottom: 10px;
        }

        .blog-content h3 {
            font-size: 1.3rem;
            margin-bottom: 10px;
            color: var(--primary-dark);
        }

        .blog-content p {
            color: var(--text-light);
            margin-bottom: 15px;
        }

        .read-more {
            color: var(--primary);
            font-weight: 600;
            display: inline-flex;
            align-items: center;
            gap: 5px;
        }

        .read-more:hover {
            color: var(--primary-dark);
        }

        /* Contact Section */
        .contact {
            background-color: var(--light-bg);
        }

        .contact-content {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 50px;
        }

        .contact-info h2 {
            font-size: 2rem;
            margin-bottom: 20px;
            color: var(--primary-dark);
        }

        .contact-info p {
            margin-bottom: 30px;
            color: var(--text-light);
        }

        .contact-details {
            margin-bottom: 30px;
        }

        .contact-item {
            display: flex;
            align-items: center;
            gap: 15px;
            margin-bottom: 15px;
        }

        .contact-icon {
            width: 40px;
            height: 40px;
            background-color: var(--primary);
            color: var(--white);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .contact-form {
            background-color: var(--white);
            padding: 30px;
            border-radius: var(--border-radius);
            box-shadow: var(--shadow);
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 500;
        }

        .form-control {
            width: 100%;
            padding: 12px 15px;
            border: 1px solid #ddd;
            border-radius: var(--border-radius);
            font-family: inherit;
            transition: var(--transition);
        }

        .form-control:focus {
            border-color: var(--primary);
            outline: none;
        }

        textarea.form-control {
            min-height: 150px;
            resize: vertical;
        }

        /* Footer */
        footer {
            background-color: var(--primary-dark);
            color: var(--white);
            padding: 60px 0 20px;
        }

        .footer-content {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 40px;
            margin-bottom: 40px;
        }

        .footer-column h3 {
            font-size: 1.3rem;
            margin-bottom: 20px;
            position: relative;
            padding-bottom: 10px;
        }

        .footer-column h3:after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            width: 40px;
            height: 3px;
            background-color: var(--secondary);
        }

        .footer-links li {
            margin-bottom: 10px;
        }

        .footer-links a {
            transition: var(--transition);
            opacity: 0.8;
        }

        .footer-links a:hover {
            opacity: 1;
            padding-left: 5px;
        }

        .social-links {
            display: flex;
            gap: 15px;
            margin-top: 20px;
        }

        .social-links a {
            width: 40px;
            height: 40px;
            background-color: rgba(255, 255, 255, 0.1);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: var(--transition);
        }

        .social-links a:hover {
            background-color: var(--secondary);
            transform: translateY(-3px);
        }

        .copyright {
            text-align: center;
            padding-top: 20px;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
            font-size: 0.9rem;
            opacity: 0.7;
        }

        /* Loading Spinner */
        .spinner {
            border: 4px solid #f3f3f3;
            border-top: 4px solid var(--primary);
            border-radius: 50%;
            width: 40px;
            height: 40px;
            animation: spin 1s linear infinite;
            margin: 20px auto;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        /* Alert Messages */
        .alert {
            padding: 15px;
            margin-bottom: 20px;
            border-radius: var(--border-radius);
            font-weight: 500;
        }

        .alert-success {
            background-color: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }

        .alert-error {
            background-color: #f8d7da;
            color: #721c24;
            border: 1px solid #f5c6cb;
        }

        /* Responsive Styles */
        @media (max-width: 992px) {
            .hero h1 {
                font-size: 2.8rem;
            }
            
            .about-content,
            .research-content,
            .contact-content {
                grid-template-columns: 1fr;
            }
            
            .about-image,
            .research-image {
                order: -1;
            }
        }

        @media (max-width: 768px) {
            .hamburger {
                display: block;
            }
            
            .nav-links {
                position: fixed;
                top: 80px;
                left: -100%;
                width: 100%;
                background-color: var(--white);
                flex-direction: column;
                align-items: center;
                padding: 30px 0;
                box-shadow: var(--shadow);
                transition: var(--transition);
            }
            
            .nav-links.active {
                left: 0;
            }
            
            .hero h1 {
                font-size: 2.2rem;
            }
            
            .section {
                padding: 60px 0;
            }
            
            .section-title {
                font-size: 1.8rem;
            }
            
            .research-stats {
                grid-template-columns: 1fr;
            }
        }

        @media (max-width: 576px) {
            .hero h1 {
                font-size: 1.8rem;
            }
            
            .hero p {
                font-size: 1rem;
            }
            
            .btn {
                padding: 10px 20px;
            }
        }
    </style>
</head>
<body>
    <!-- Header -->
    <header>
        <div class="container">
            <nav class="navbar">
                <a href="#" class="logo">Agro<span>Nova</span></a>
                <ul class="nav-links">
                    <li><a href="#">Home</a></li>
                    <li><a href="#about">About</a></li>
                    <li><a href="#services">Services</a></li>
                    <li><a href="#research">Research</a></li>
                    <li><a href="#blog">Blog</a></li>
                    <li><a href="#contact">Contact</a></li>
                </ul>
                <div class="hamburger">
                    <i class="fas fa-bars"></i>
                </div>
            </nav>
        </div>
    </header>

    <!-- Hero Section -->
    <section class="hero">
        <div class="container">
            <div class="hero-content">
                <h1>Cultivating the Future, Together</h1>
                <p>Transforming traditional farming practices using modern science, data, and technology for sustainable, efficient, and smart agriculture.</p>
                <a href="#about" class="btn">Explore Our Mission</a>
            </div>
        </div>
    </section>

    <!-- About Section -->
    <section id="about" class="section about">
        <div class="container">
            <h2 class="section-title">About AgroNova</h2>
            <div class="about-content">
                <div class="about-text">
                    <h2>Revolutionizing Agriculture with Technology</h2>
                    <p>AgroNova represents the idea of transforming traditional farming practices using modern science, data, and technology. We're dedicated to creating sustainable, efficient, and smart agricultural solutions that benefit farmers, communities, and the planet.</p>
                    <p>Our team of agronomists, data scientists, and engineers work together to develop innovative approaches that increase crop yields, reduce environmental impact, and improve food security worldwide.</p>
                    <a href="#services" class="btn">Our Services</a>
                </div>
                <div class="about-image">
                    <img src="https://images.unsplash.com/photo-1625246333195-78d9c38ad449?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1170&q=80" alt="Modern farming technology">
                </div>
            </div>
        </div>
    </section>

    <!-- Services Section -->
    <section id="services" class="section services">
        <div class="container">
            <h2 class="section-title">Our Services</h2>
            <div id="services-container" class="services-grid">
                <!-- Services will be loaded dynamically -->
                <div class="spinner"></div>
            </div>
        </div>
    </section>

    <!-- Research Section -->
    <section id="research" class="section research">
        <div class="container">
            <h2 class="section-title">Our Research</h2>
            <div class="research-content">
                <div class="research-image">
                    <img src="https://images.unsplash.com/photo-1586771107445-d3ca888129ff?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1331&q=80" alt="Agricultural research">
                </div>
                <div class="research-text">
                    <h2>Innovating for Sustainable Agriculture</h2>
                    <p>At AgroNova, research is at the core of everything we do. Our R&D team is constantly exploring new frontiers in agricultural technology, from gene editing for crop resilience to AI-powered predictive analytics.</p>
                    <p>We collaborate with leading universities, research institutions, and farming communities to ensure our solutions are both scientifically sound and practically applicable.</p>
                    <div class="research-stats">
                        <div class="stat">
                            <div class="stat-number">15+</div>
                            <div class="stat-text">Research Projects</div>
                        </div>
                        <div class="stat">
                            <div class="stat-number">24</div>
                            <div class="stat-text">Patents Filed</div>
                        </div>
                        <div class="stat">
                            <div class="stat-number">50+</div>
                            <div class="stat-text">Partner Farms</div>
                        </div>
                        <div class="stat">
                            <div class="stat-number">12</div>
                            <div class="stat-text">Countries</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Blog Section -->
    <section id="blog" class="section blog">
        <div class="container">
            <h2 class="section-title">Latest from Our Blog</h2>
            <div id="blog-container" class="blog-grid">
                <!-- Blog posts will be loaded dynamically -->
                <div class="spinner"></div>
            </div>
        </div>
    </section>

    <!-- Contact Section -->
    <section id="contact" class="section contact">
        <div class="container">
            <h2 class="section-title">Get In Touch</h2>
            <div id="contact-alert" style="display: none;"></div>
            <div class="contact-content">
                <div class="contact-info">
                    <h2>Let's Cultivate the Future Together</h2>
                    <p>Interested in our services or want to collaborate on a project? Reach out to us and our team will get back to you as soon as possible.</p>
                    <div class="contact-details">
                        <div class="contact-item">
                            <div class="contact-icon">
                                <i class="fas fa-map-marker-alt"></i>
                            </div>
                            <div>
                                <h4>Our Location</h4>
                                <p>123 Innovation Drive, Tech Park, CA 94025</p>
                            </div>
                        </div>
                        <div class="contact-item">
                            <div class="contact-icon">
                                <i class="fas fa-phone"></i>
                            </div>
                            <div>
                                <h4>Phone Number</h4>
                                <p>+1 (555) 123-4567</p>
                            </div>
                        </div>
                        <div class="contact-item">
                            <div class="contact-icon">
                                <i class="fas fa-envelope"></i>
                            </div>
                            <div>
                                <h4>Email Address</h4>
                                <p>info@agronova.com</p>
                            </div>
                        </div>
                    </div>
                    <div class="social-links">
                        <a href="#"><i class="fab fa-facebook-f"></i></a>
                        <a href="#"><i class="fab fa-twitter"></i></a>
                        <a href="#"><i class="fab fa-instagram"></i></a>
                        <a href="#"><i class="fab fa-linkedin-in"></i></a>
                    </div>
                </div>
                <div class="contact-form">
                    <form id="contact-form">
                        <div class="form-group">
                            <label for="name">Full Name *</label>
                            <input type="text" id="name" name="name" class="form-control" placeholder="Your Name" required>
                        </div>
                        <div class="form-group">
                            <label for="email">Email Address *</label>
                            <input type="email" id="email" name="email" class="form-control" placeholder="Your Email" required>
                        </div>
                        <div class="form-group">
                            <label for="phone">Phone Number</label>
                            <input type="tel" id="phone" name="phone" class="form-control" placeholder="Your Phone">
                        </div>
                        <div class="form-group">
                            <label for="company">Company</label>
                            <input type="text" id="company" name="company" class="form-control" placeholder="Your Company">
                        </div>
                        <div class="form-group">
                            <label for="subject">Subject *</label>
                            <input type="text" id="subject" name="subject" class="form-control" placeholder="Subject" required>
                        </div>
                        <div class="form-group">
                            <label for="message">Message *</label>
                            <textarea id="message" name="message" class="form-control" placeholder="Your Message" required></textarea>
                        </div>
                        <button type="submit" class="btn btn-secondary" id="submit-btn">
                            <span id="submit-text">Send Message</span>
                            <div id="submit-spinner" class="spinner" style="display: none; width: 20px; height: 20px; margin: 0;"></div>
                        </button>
                    </form>
                </div>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer>
        <div class="container">
            <div class="footer-content">
                <div class="footer-column">
                    <h3>AgroNova</h3>
                    <p>Transforming traditional farming practices using modern science, data, and technology for sustainable, efficient, and smart agriculture.</p>
                    <div class="social-links">
                        <a href="#"><i class="fab fa-facebook-f"></i></a>
                        <a href="#"><i class="fab fa-twitter"></i></a>
                        <a href="#"><i class="fab fa-instagram"></i></a>
                        <a href="#"><i class="fab fa-linkedin-in"></i></a>
                    </div>
                </div>
                <div class="footer-column">
                    <h3>Quick Links</h3>
                    <ul class="footer-links">
                        <li><a href="#">Home</a></li>
                        <li><a href="#about">About</a></li>
                        <li><a href="#services">Services</a></li>
                        <li><a href="#research">Research</a></li>
                        <li><a href="#blog">Blog</a></li>
                        <li><a href="#contact">Contact</a></li>
                    </ul>
                </div>
                <div class="footer-column">
                    <h3>Services</h3>
                    <ul class="footer-links" id="services-footer">
                        <!-- Services links will be loaded dynamically -->
                    </ul>
                </div>
                <div class="footer-column">
                    <h3>Contact Info</h3>
                    <ul class="footer-links">
                        <li><i class="fas fa-map-marker-alt"></i> 123 Innovation Drive, Tech Park, CA 94025</li>
                        <li><i class="fas fa-phone"></i> +1 (555) 123-4567</li>
                        <li><i class="fas fa-envelope"></i> info@agronova.com</li>
                    </ul>
                </div>
            </div>
            <div class="copyright">
                <p>&copy; 2024 AgroNova. All Rights Reserved.</p>
            </div>
        </div>
    </footer>

    <script>
        // API Configuration
        const API_BASE_URL = 'http://localhost:5001/api';

        // API Service Functions
        const apiService = {
            // Get all services
            async getServices() {
                try {
                    const response = await fetch(`${API_BASE_URL}/services`);
                    const data = await response.json();
                    return data;
                } catch (error) {
                    console.error('Error fetching services:', error);
                    return { success: false, data: [] };
                }
            },

            // Get all blog posts
            async getBlogs() {
                try {
                    const response = await fetch(`${API_BASE_URL}/blog`);
                    const data = await response.json();
                    return data;
                } catch (error) {
                    console.error('Error fetching blogs:', error);
                    return { success: false, data: [] };
                }
            },

            // Submit contact form
            async submitContact(formData) {
                try {
                    const response = await fetch(`${API_BASE_URL}/contact`, {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json',
                        },
                        body: JSON.stringify(formData)
                    });
                    const data = await response.json();
                    return data;
                } catch (error) {
                    console.error('Error submitting contact form:', error);
                    return { success: false, message: 'Network error. Please try again.' };
                }
            }
        };

        // DOM Functions
        const domManager = {
            // Show alert message
            showAlert(message, type = 'success') {
                const alertDiv = document.getElementById('contact-alert');
                alertDiv.innerHTML = `
                    <div class="alert alert-${type}">
                        ${message}
                    </div>
                `;
                alertDiv.style.display = 'block';
                
                // Auto hide after 5 seconds
                setTimeout(() => {
                    alertDiv.style.display = 'none';
                }, 5000);
            },

            // Render services
            renderServices(services) {
                const servicesContainer = document.getElementById('services-container');
                const footerServices = document.getElementById('services-footer');
                
                if (!services || services.length === 0) {
                    servicesContainer.innerHTML = '<p>No services available at the moment.</p>';
                    return;
                }

                servicesContainer.innerHTML = services.map(service => `
                    <div class="service-card">
                        <div class="service-icon">
                            <i class="${service.icon || 'fas fa-seedling'}"></i>
                        </div>
                        <h3>${service.title}</h3>
                        <p>${service.description}</p>
                        ${service.features && service.features.length > 0 ? `
                            <ul style="text-align: left; margin-top: 15px;">
                                ${service.features.map(feature => `<li style="margin-bottom: 5px;">• ${feature}</li>`).join('')}
                            </ul>
                        ` : ''}
                    </div>
                `).join('');

                // Also update footer services
                footerServices.innerHTML = services.map(service => `
                    <li><a href="#services">${service.title}</a></li>
                `).join('');
            },

            // Render blog posts
            renderBlogs(blogs) {
                const blogContainer = document.getElementById('blog-container');
                
                if (!blogs || blogs.length === 0) {
                    blogContainer.innerHTML = '<p>No blog posts available at the moment.</p>';
                    return;
                }

                blogContainer.innerHTML = blogs.map(blog => `
                    <div class="blog-card">
                        <div class="blog-image">
                            <img src="${blog.featuredImage || 'https://images.unsplash.com/photo-1551288049-bebda4e38f71?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1170&q=80'}" alt="${blog.title}">
                        </div>
                        <div class="blog-content">
                            <div class="blog-date">${new Date(blog.publishedAt || blog.createdAt).toLocaleDateString()}</div>
                            <h3>${blog.title}</h3>
                            <p>${blog.excerpt}</p>
                            <a href="#" class="read-more" data-blog-id="${blog._id}">Read More <i class="fas fa-arrow-right"></i></a>
                        </div>
                    </div>
                `).join('');
            },

            // Toggle form loading state
            toggleFormLoading(loading) {
                const submitBtn = document.getElementById('submit-btn');
                const submitText = document.getElementById('submit-text');
                const submitSpinner = document.getElementById('submit-spinner');
                
                if (loading) {
                    submitBtn.disabled = true;
                    submitText.style.display = 'none';
                    submitSpinner.style.display = 'inline-block';
                } else {
                    submitBtn.disabled = false;
                    submitText.style.display = 'inline';
                    submitSpinner.style.display = 'none';
                }
            }
        };

        // Event Handlers
        const eventHandlers = {
            // Handle contact form submission
            async handleContactSubmit(event) {
                event.preventDefault();
                
                const form = event.target;
                const formData = {
                    name: form.name.value,
                    email: form.email.value,
                    phone: form.phone.value,
                    company: form.company.value,
                    subject: form.subject.value,
                    message: form.message.value
                };

                // Basic validation
                if (!formData.name || !formData.email || !formData.subject || !formData.message) {
                    domManager.showAlert('Please fill in all required fields.', 'error');
                    return;
                }

                domManager.toggleFormLoading(true);

                try {
                    const result = await apiService.submitContact(formData);
                    
                    if (result.success) {
                        domManager.showAlert(result.message || 'Thank you for your message! We will get back to you soon.');
                        form.reset();
                    } else {
                        domManager.showAlert(result.message || 'There was an error sending your message. Please try again.', 'error');
                    }
                } catch (error) {
                    domManager.showAlert('Network error. Please check your connection and try again.', 'error');
                } finally {
                    domManager.toggleFormLoading(false);
                }
            },

            // Handle blog click
            handleBlogClick(event) {
                if (event.target.closest('.read-more')) {
                    event.preventDefault();
                    const blogId = event.target.closest('.read-more').dataset.blogId;
                    // In a real app, this would navigate to a blog detail page
                    alert(`This would open blog post ${blogId} in a real application`);
                }
            }
        };

        // Initialize the application
        async function initApp() {
            console.log('Initializing AgroNova application...');

            // Load services
            try {
                const servicesResult = await apiService.getServices();
                if (servicesResult.success) {
                    domManager.renderServices(servicesResult.data);
                } else {
                    // Fallback to default services if API fails
                    domManager.renderServices([
                        {
                            title: "Smart Crop Monitoring",
                            description: "Utilizing drones and IoT sensors to monitor crop health, soil conditions, and environmental factors in real-time.",
                            icon: "fas fa-seedling",
                            features: ["Real-time monitoring", "Drone technology", "IoT sensors"]
                        },
                        {
                            title: "Precision Irrigation",
                            description: "Automated irrigation systems that deliver water precisely when and where it's needed, reducing waste by up to 50%.",
                            icon: "fas fa-tint",
                            features: ["Water conservation", "Automated systems", "Smart scheduling"]
                        }
                    ]);
                }
            } catch (error) {
                console.error('Error loading services:', error);
            }

            // Load blog posts
            try {
                const blogsResult = await apiService.getBlogs();
                if (blogsResult.success) {
                    domManager.renderBlogs(blogsResult.data);
                } else {
                    // Fallback to default blog posts if API fails
                    domManager.renderBlogs([
                        {
                            _id: "1",
                            title: "The Future of Precision Agriculture",
                            excerpt: "Exploring how AI and machine learning are revolutionizing farming practices and increasing efficiency.",
                            publishedAt: new Date().toISOString(),
                            featuredImage: "https://images.unsplash.com/photo-1592982537447-7448a57fbab7?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1170&q=80"
                        }
                    ]);
                }
            } catch (error) {
                console.error('Error loading blogs:', error);
            }

            // Set up event listeners
            document.getElementById('contact-form').addEventListener('submit', eventHandlers.handleContactSubmit);
            document.getElementById('blog-container').addEventListener('click', eventHandlers.handleBlogClick);

            console.log('AgroNova application initialized successfully!');
        }

        // Mobile Navigation Toggle
        const hamburger = document.querySelector('.hamburger');
        const navLinks = document.querySelector('.nav-links');
        
        hamburger.addEventListener('click', () => {
            navLinks.classList.toggle('active');
        });
        
        // Close mobile menu when clicking on a link
        document.querySelectorAll('.nav-links a').forEach(link => {
            link.addEventListener('click', () => {
                navLinks.classList.remove('active');
            });
        });
        
        // Smooth scrolling for anchor links
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function(e) {
                e.preventDefault();
                
                const targetId = this.getAttribute('href');
                if(targetId === '#') return;
                
                const targetElement = document.querySelector(targetId);
                if(targetElement) {
                    window.scrollTo({
                        top: targetElement.offsetTop - 80,
                        behavior: 'smooth'
                    });
                }
            });
        });

        // Initialize the application when DOM is loaded
        document.addEventListener('DOMContentLoaded', initApp);
    </script>
</body>
</html>